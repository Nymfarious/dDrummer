# Create an API Registry v1 as a user-visible table, and save CSV/JSON copies
import pandas as pd
from caas_jupyter_tools import display_dataframe_to_user

cols = [
    "API Name",
    "Vendor",
    "Category",
    "Purpose / What it does",
    "Used In (apps/modules)",
    "Status (Planned/Testing/Live/Deprecated)",
    "Free Tier?",
    "Auth Type",
    "Rate Limits",
    "Key Stored? (no secrets here)",
    "Docs URL",
    "Notes",
]

# Seed with items Shannon has mentioned across projects (placeholders where unknown)
data = [
    {
        "API Name": "Canva API",
        "Vendor": "Canva",
        "Category": "Design / Asset Generation",
        "Purpose / What it does": "Programmatic design generation and asset handling",
        "Used In (apps/modules)": "Drummer (assets), Storybook (layouts)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Unknown",
        "Auth Type": "OAuth",
        "Rate Limits": "TBD",
        "Key Stored? (no secrets here)": "No",
        "Docs URL": "",
        "Notes": "Investigate pricing & scope for prototyping only",
    },
    {
        "API Name": "CapCut API",
        "Vendor": "Bytedance / CapCut",
        "Category": "Video Editing / Effects",
        "Purpose / What it does": "Programmatic video editing, effects and exports",
        "Used In (apps/modules)": "Drummer (practice clips), Storybook (page-turn videos)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Unknown",
        "Auth Type": "OAuth / API key",
        "Rate Limits": "TBD",
        "Key Stored? (no secrets here)": "No",
        "Docs URL": "",
        "Notes": "Confirm availability and licensing for non-commercial prototyping",
    },
    {
        "API Name": "Muse Hub Elements",
        "Vendor": "Muse Group",
        "Category": "Audio / Loops & FX",
        "Purpose / What it does": "Access loops/elements for layering tracks",
        "Used In (apps/modules)": "Drummer (backing tracks), Storybook (page SFX)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Unknown",
        "Auth Type": "TBD",
        "Rate Limits": "TBD",
        "Key Stored? (no secrets here)": "No",
        "Docs URL": "",
        "Notes": "Check licensing terms for distribution in user projects",
    },
    {
        "API Name": "Supabase",
        "Vendor": "Supabase",
        "Category": "Backend / Auth / DB / Storage",
        "Purpose / What it does": "Database, auth, storage for app data",
        "Used In (apps/modules)": "Drummer, Storybook, Little Sister",
        "Status (Planned/Testing/Live/Deprecated)": "Testing",
        "Free Tier?": "Yes (limits apply)",
        "Auth Type": "Service role / anon key (secure on server); OAuth providers",
        "Rate Limits": "Project-tier dependent",
        "Key Stored? (no secrets here)": "Server-side only",
        "Docs URL": "https://supabase.com/docs",
        "Notes": "Prefer RLS and row-level encryption for sensitive data",
    },
    {
        "API Name": "GitHub OAuth",
        "Vendor": "GitHub",
        "Category": "Auth / Repo Integration",
        "Purpose / What it does": "Sign-in and repo access for exports/backups",
        "Used In (apps/modules)": "Drummer, Storybook (exports), Template Composer",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Yes",
        "Auth Type": "OAuth",
        "Rate Limits": "High; endpoint-specific",
        "Key Stored? (no secrets here)": "No",
        "Docs URL": "https://docs.github.com/en/developers/apps",
        "Notes": "Export generated projects and assets to user repos",
    },
    {
        "API Name": "Metronome API (candidate)",
        "Vendor": "TBD",
        "Category": "Audio / Timing",
        "Purpose / What it does": "Provide tempo control, click tracks, and sync hooks",
        "Used In (apps/modules)": "Drummer (Metronome, Practice Engine)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Unknown",
        "Auth Type": "None / API key",
        "Rate Limits": "N/A",
        "Key Stored? (no secrets here)": "No",
        "Docs URL": "",
        "Notes": "Shortlist libraries/services; verify mobile latency performance",
    },
    {
        "API Name": "WebSocket Service",
        "Vendor": "Self / PaaS",
        "Category": "Realtime",
        "Purpose / What it does": "Live collaboration, session control, teacher-track overlay",
        "Used In (apps/modules)": "Drummer (collab), Little Sister (care team notes)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Depends on host",
        "Auth Type": "JWT / Cookie",
        "Rate Limits": "Host-dependent",
        "Key Stored? (no secrets here)": "Server-side only",
        "Docs URL": "",
        "Notes": "Evaluate Pusher/Ably/Supabase Realtime vs self-hosted",
    },
    {
        "API Name": "Image Generation (placeholder)",
        "Vendor": "TBD",
        "Category": "Images / Avatars",
        "Purpose / What it does": "Generate/transform avatars and story art",
        "Used In (apps/modules)": "Storybook (illustrations), Little Sister (avatar)",
        "Status (Planned/Testing/Live/Deprecated)": "Planned",
        "Free Tier?": "Unknown",
        "Auth Type": "API key",
        "Rate Limits": "Provider-dependent",
        "Key Stored? (no secrets here)": "Server-side only",
        "Docs URL": "",
        "Notes": "Confirm licensing for commercial prints/downloads",
    },
]

df = pd.DataFrame(data, columns=cols)

csv_path = "/mnt/data/api_registry_v1.csv"
json_path = "/mnt/data/api_registry_v1.json"
df.to_csv(csv_path, index=False)
df.to_json(json_path, orient="records", indent=2)

display_dataframe_to_user("API Registry v1", df)

csv_path, json_path
